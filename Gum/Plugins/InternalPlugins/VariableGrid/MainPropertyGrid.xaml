<UserControl
  x:Class="Gum.MainPropertyGrid"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:Converters="clr-namespace:Gum.Plugins.InternalPlugins.VariableGrid.Converters"
  xmlns:WpfDataUi="clr-namespace:WpfDataUi;assembly=WpfDataUi"
  xmlns:controls="clr-namespace:WpfDataUi.Controls;assembly=WpfDataUi"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:variableGrid="clr-namespace:Gum.Plugins.VariableGrid"
  xmlns:wpf="clr-namespace:FluentIcons.Wpf;assembly=FluentIcons.Wpf"
  xmlns:wpfdatauiTypes="clr-namespace:WpfDataUi.DataTypes;assembly=WpfDataUi"
  d:DataContext="{d:DesignInstance d:Type={x:Type variableGrid:MainControlViewModel},
                                   IsDesignTimeCreatable=False}"
  d:DesignHeight="200"
  d:DesignWidth="300"
  mc:Ignorable="d">
  <UserControl.Resources>
    <Converters:BehaviorVariableToStringConverter x:Key="BehaviorVariableToStringConverter" />
  </UserControl.Resources>
  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" MaxHeight="200" />
      <RowDefinition Height="Auto" MaxHeight="200" />
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
    </Grid.RowDefinitions>

    <Label
      Background="{DynamicResource Frb.Brushes.Primary.Transparent}"
      Content="{Binding StateInformation}"
      Visibility="{Binding HasStateInformation}" />
    <Label
      Grid.Row="1"
      Content="{Binding ErrorInformation}"
      Foreground="{DynamicResource Frb.Brushes.Error}"
      Visibility="{Binding HasErrors}" />
    <TextBlock
      Grid.Row="2"
      Margin="5"
      Text="{Binding CategoryNotification}"
      TextWrapping="Wrap"
      Visibility="{Binding HasCategoryNotification}" />
    <Grid Grid.Row="3">
      <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition Height="Auto" />
      </Grid.RowDefinitions>
      <WpfDataUi:DataUiGrid
        Name="DataGrid"
        Style="{StaticResource DataUiGrid.VariableGrid}"
        Visibility="{Binding ShowVariableGrid}" />
      <Grid Visibility="{Binding ShowBehaviorUi}">
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto" />
          <RowDefinition />
          <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <WpfDataUi:DataUiGrid Name="BehaviorDataGrid" Grid.Row="0" />
        <ListBox
          Grid.Row="1"
          ItemsSource="{Binding BehaviorVariables}"
          SelectedItem="{Binding SelectedBehaviorVariable}"
          SelectionChanged="ListBox_SelectionChanged">
          <ListBox.ContextMenu>
            <ContextMenu x:Name="ListBoxContextMenu" ItemsSource="{Binding BehaviorVariablesContextMenuItems}" />
          </ListBox.ContextMenu>
          <ListBox.ItemTemplate>
            <DataTemplate>
              <Label Content="{Binding Converter={StaticResource BehaviorVariableToStringConverter}}" />
            </DataTemplate>
          </ListBox.ItemTemplate>
        </ListBox>
      </Grid>
      <Button
        Grid.Row="1"
        Margin="0,2,0,0"
        BorderThickness="1"
        Click="HandleAddVariableClicked"
        Style="{StaticResource IconButton}"
        ToolTip="Add Variable"
        Visibility="{Binding AddVariableButtonVisibility}">
        <Button.Content>
          <StackPanel Orientation="Horizontal">
            <ContentPresenter Content="{wpf:FluentIcon Icon=Add}" />
            <TextBlock Text="Add Variable" />
          </StackPanel>
        </Button.Content>
      </Button>
    </Grid>
  </Grid>
</UserControl>
